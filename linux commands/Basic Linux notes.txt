
Types of Login User's
------------------------

1. Root user   (Super user)                               -  #                        100% privileges
   Root's home directory  -          /root

2. Normal user / custom user / Any user                   -  $                         20% privileges
   Normal user's home directory  -   /home/sansri

Types of Root
-------------------
1. root  (super user login name)
2. /root - root's home directory
3. "/"  - system partition ( root partition )


/  ( Root directory or Parent directory or Top level Directory )
-------------------------------------------------------------------

By default around 19 sub directories will created automatically during the OS installation.
19 directories = (OS defined data + User's defined data)
                 (services + user's defined data both are defined under root directory)

19 = 17 (public place) directories manages the Os  + 2 (private place) directories are reserved for the User's home account 
17  directories manages the Os
2   directories are reserved for the User's home account
    1 directory is for Root user (super user)
	/root

    1 directory is for the all (custom user / normal user)
	/home  ==>  sansri user  ==>  /home/sansri
		    Deepak user  ==>  /home/Deepak


Types of place for data creation 
-----------------------------------
1. Personal home account / Home directory /Private Place
Every user have default right of data creation in their home account.

2.Public place
Except of users home directory all directory will count in public place under the  / (partition or directory).

Note: 
By default Super user have right of data creation on any place but normal users have right only in their home account except of their home account they will work as per the defined permissions on every directory.


[root@localhost ~]#                               root user's home account   (root user apna home account pr hai)
[root@localhost ~]# ls 
[root@localhost ~]# ls /root
[root@localhost ~]# ls /
[root@localhost ~]# pwd
/root


[root@localhost ~]# ls /home
sansri   deepak
[root@localhost ~]# ls /home/sansri
Desktop   Documents    Downloads    Music    Pictures     Public    Templates    Videos

Types of command prompt
------------------------

1) Super user
 
[root@localhost ~]#

root         => username
localhost    => machine name or hostname   (it is changable)
~            => present working directory (I am sitting in my home account  /root)
#            => Privileged Mode 100%

You are login with root user on local host machine with (~) directory with privileged mode ( # )

2) Normal user
 
[sansri@localhost ~]#

sansri         => username
localhost    => machine name or hostname   (it is changable)
~            => present working directory (I am sitting in my home account  /home/sansri)
$            => Non-Privileged Mode 20%

You are login with sansri user on local host machine with (~) directory with privileged mode ( $ )





User Management
==================================

Types of Linux Users

1. Super user     -------------->  ( Root )             ---------->  user id ( 0 )
2. System user    -------------->  ( Services )         ---------->  user id ( 1 - 999 )
3. Normal user    -------------->  ( Standard user )    ---------->  user id ( 1000 - 60000 )

Commands to Manage users in Linux

1. useradd - To create users
2. usermod - To manage user properties
3. userdel - To delete user

User information Files

1. /root       	-  Super user's home directory
2. /home       	-  Normal user's home directory
3. /etc/passwd 	-  All user's Information
4. /etc/shadow 	-  All user's Password & Policy information


Practical
===============

1. To create user

# useradd / adduser   sunny
# passwd  sunny



# cat -n  /etc/passwd 
# grep -n sunny/etc/passwd

root:x:0:0:root:/root:/bin/bash
 : user full name : user's home directory : user login shell )

sunny:x:1000:1000:sunny:/home/sunny:/bin/bash
(user name : password pointer : user id : group id: user full name : user's home directory : user login shell )





# grep -n sunny/etc/shadow

sunny:$6$hsjshshshdhsjshhjsdlajiueirpqoiruqoehf.kljufljalfkyah.haugdauytdg:17897:0:99999:7:::
( user name : password : no of days : minimum password days : maximum password days : warning days for passwd expire : account expire )


2. To Modify

vishu:x:1002:1002::/home/vishu:/bin/bash
preet:x:1000:1000:preet:/home/preet:/bin/bash


To add the full name to existing user

# usermod -c "vishu malik"  vishu
# grep -n sunny/etc/passwd
vishu:x:1002:1002:vishu malik:/home/vishu:/bin/bash



To modify the login shell of user

# usermod -s /sbin/nologin  vishu
# grep -n vishu/etc/passwd
vishu:x:1002:1002:vishu malik:/home/vishu:/sbin/nologin



To retrieve vishu users login shell

# usermod -s /bin/bash  vishu
# grep -n vishu/etc/passwd
vishu:x:1002:1002:vishu malik:/home/vishu:/bin/bash



To rename the user

# usermod -l vishesh  vishu
# grep -n vishu/etc/passwd
vishesh:x:1002:1002:vishu malik:/home/vishu:/bin/bash


To delete the user

# userdel  vishesh 




Group Management
==================================



Types of Linux Group

1. Super group     -------------->  ( Root )             ---------->  user id ( 0 )
2. System group    -------------->  ( Services )         ---------->  user id ( 1 - 999 )
3. Normal group    -------------->  ( Standard group )    ---------->  user id ( 1000 - 60000 )

Commands to Manage Group in Linux

1. groupadd - To create new group
2. groupmod - To manage group properties
3. groupdel - To delete group

Group information Files

1. /etc/group	-  All group's Information
2. /etc/gshadow -  All group's Password & Policy information





Practical
===============

# cat /etc/group
root:x:0:
(user name : password pointer : group id )

preet:x:1000;preet



Whenever we create a user automatically with same name group is also created and user id as well as group id is also same
# useradd vishu
# passwd vishu
# grep vishu /etc/group
vishu:x:1001:

#grep vishu /etc/passwd
vishu:x:1001:1001::/home/vishu:/bin/bash

#grep vishu /etc/gshadow
vishu:!::








To create group

# groupadd malik

# grep malik /etc/group
malik:x:1002:

To rename group

# groupmod -n IBM malik
# grep malik /etc/group
# grep IBM /etc/group
IBM:x:1002:

To change group id

# groupmod -g 2100 IBM
# grep IBM /etc/group
IBM:x:2100:


To add the user in the group

# usermod -G IBM preet
# grep IBM /etc/group
IBM:x:2100:preet

To delete the group

# groupdel IBM
# grep IBM /etc/group



****************************************************************************************************************************



Basic Permission for file & directory of Linux
================================================================


( Permission )            ( Symbolic )             ( Numeric )

Read				R			4					sirf dekhna
Write				W			2					modify v kr skte hai
Execute				X			1					file ke andar ja skte hai


d/l                rwx              rwx            rwx		
Dir / Link	owner User	Owner Group	Other User



Root User
-------------

Default Directory Permission for the root user

d/l    rwx      r x    r x		( Symbolic )

	7	5	5		( Numeric )

Default File Permission for the root user

 /l    rwx      r       r 		( Symbolic )

	6	4	4		( Numeric )



[root@localhost ]# ls
[root@localhost ]# mkdir malik
[root@localhost ]# touch vishesh
[root@localhost ]# ls
[root@localhost ]# ls -l
drwxr-xr-x  . 2  root  root  6 Feb  3   22:23  malik
lrwxrwxrwx  . 1  root  root  9 Dec  24  07:08  lib  -> usr/sbin
-rw-r--r--  . 2  root  root  0 Feb  3   22:23  vishesh




Normal User 
-------------------

Default Directory Permission for the normal user

d/l    rwx      rwx    r x		( Symbolic )

	7	7	5		( Numeric )

Default File Permission for the normal user

 /l    rwx      rw       r 		( Symbolic )

	6	6	4		( Numeric )


[preet@localhost ]$ ls
[preet@localhost ]$ mkdir sandeepoff
[preet@localhost ]$ touch sansri
[preet@localhost ]$ ls
[preet@localhost ]$ ls -l
drwxrwxr-x  . 2  preet  preet  6 Feb  3   22:23  malik
lrwxrwxrwx  . 1  preet  preet  9 Dec  24  07:08  lib  -> usr/sbin
-rw-rw-r--  . 1  preet  preet  0 Feb  3   22:23  sansri



[preet@localhost ~]$ cd /
[preet@localhost /]$ ls
[preet@localhost /]$ cd malik
[preet@localhost malik]$ ls
[preet@localhost malik]$ touch raj                   -------------- permission denied



How to change default permission for File & Directory
-------------------------------------------------------------------

1.Symbolic

	u=user		g=group			o=other
chmod	u=rwx		g=rwx			o=rwx	   File /Dir


2.Numeric

chmod  777   File /Dir



Practical
============


[root@localhost ]# ls -l
drwxr-xr-x  . 2  root  root  6 Feb  3   22:23  malik

1. Symbolic method

Giving only execute permission to user
-----------------------------------------------
[root@localhost ]# chmod  u=rwx, g=rx, o=x  malik
[root@localhost ]# ls -l
drwxr-x--x  . 2  root  root  6 Feb  3   22:23  malik

[preet@localhost ~]$ cd /
[preet@localhost /]$ cd malik
[preet@localhost malik]$ 			-------------- execute permission is there so it can go inside the folder
[preet@localhost malik]$ ls                     -------------- permission denied (read permission from the user is taken)

Giving read & execute permission to user
---------------------------------

[root@localhost ]# chmod  u=rwx, g=rx, o=rx  malik
[root@localhost ]# ls -l
drwxr-xr-x  . 2  root  root  6 Feb  3   22:23  malik

[preet@localhost ~]$ cd /
[preet@localhost /]$ cd malik
[preet@localhost malik]$ 			-------------- execute permission is there so it can go inside the folder
[preet@localhost malik]$ ls                     ----------- permission acessed (read permission from the user is given now)

Giving full permission to user
---------------------------------

[root@localhost ]# chmod  u=rwx, g=rx, o=rwx  malik
[root@localhost ]# ls -l
drwxr-xrwx  . 2  root  root  6 Feb  3   22:23  malik (green color)

[preet@localhost ~]$ cd /
[preet@localhost /]$ cd malik
[preet@localhost malik]$ 			-------------- execute permission is there so it can go inside the folder
[preet@localhost malik]$ ls                     ----------- permission acessed (read permission from the user is given now)
[preet@localhost malik]$ touch raj  	      -------------- write permission is given so it can make any file


2.Numeric method

[root@localhost ]# ls -l
drwxr-xr-x  . 2  root  root  6 Feb  3   22:23  malik

[root@localhost ]# chmod  777   malik
[root@localhost ]# ls -l
drwxrwxrwx  . 2  root  root  6 Feb  3   22:23  malik




*************************************************************************************************************************



SUDO ( Super user do )
==============================


It is mainly used to provide commands execution rights to any user or any group

Only Root user has the execution right for all commands
But normal user have only limited commands execution rights

/etc/sudoers   - configuration file for Sudo





To give full execution rights


# vim /etc/sudoers

## Allow root to run any command anywhere
root     ALL=(ALL)        ALL
preet     ALL=(ALL)        ALL


To limit execution rights

# which userdel
/usr/sbin/userdel

# vim /etc/sudoers

## Allow root to run any command anywhere
root     ALL=(ALL)        ALL
preet     ALL=(ALL)        ALL,!/usr/sbin/userdel


To give full execution rights on a group

# grep india  /etc/group
india:x:1002:user1,user2,user3

# vim /etc/sudoers

## Allow people in group wheel to run all commands 
%wheel    ALL=(ALL)        ALL
%india    ALL=(ALL)        ALL



*****************************************************************************************************************************


SUID (set user id )
=========================

SUID is used for giving permission to a user to run a program/file with the permission of the file owner.

We can apply SUID by two methods-
1.chmod u+s    "command file path"     Symbolic method
2.chmod 4755   "command file path"     Numeric method

We can remove SUID by two methods-
1.chmod u-s    "command file path"     Symbolic method
2.chmod 755   "command file path"     Numeric method

# which useradd
/usr/sbin/useradd
ll /usr/sbin/useradd
-rwxr-x---. 1 root root 114064 Feb 12 2014 /usr/sbin/useradd


chmod 755  /usr/sbin/useradd
ll /usr/sbin/useradd
-rwxr-xr-x. 1 root root 114064 Feb 12 2014 /usr/sbin/useradd

To add the SUID BY symbolic method

chmod u+s /usr/sbin/useradd
ll /usr/sbin/useradd
-rwsr-xr-x. 1 root root 114064 Feb 12 2014 /usr/sbin/useradd  

[preet@localhost]$ useradd vishu
[preet@localhost]$ grep vishu  /etc/passwd
vishu:x:1001:1001::/home/vishu:/bin/bash

To remove the SUID BY symbolic method

chmod u-s /usr/sbin/useradd
ll /usr/sbin/useradd
-rwxr-xr-x. 1 root root 114064 Feb 12 2014 /usr/sbin/useradd


To add the SUID BY numeric method

chmod 4755 /usr/sbin/useradd
ll /usr/sbin/useradd
-rwsr-xr-x. 1 root root 114064 Feb 12 2014 /usr/sbin/useradd  

[preet@localhost]$ useradd vishu
[preet@localhost]$ grep vishu  /etc/passwd
vishu:x:1001:1001::/home/vishu:/bin/bash

To remove the SUID BY numeric method

chmod 755 /usr/sbin/useradd
ll /usr/sbin/useradd
-rwxr-xr-x. 1 root root 114064 Feb 12 2014 /usr/sbin/useradd





****************************************************************************************************************************


Network Configuration     ( BY Linux Wale )
===========================

RHEL -8    Machine-1

IP             ==>  192.168.0.10
SUBNET         ==>  255.255.255.0
machine name   ==>  station10.example.com

==================================================

RHEL -8    Machine-2

IP             ==>  192.168.0.20
SUBNET         ==>  255.255.255.0
machine name   ==>  station20.example.com



Network Management
===================

         
    RHEL -6                                                 		RHEL-7  

1. ifconfig					                         1. ifconfig
   hostname							            hostname / hostnamectl

2. Permanent file of hostname    					2. Permanent file of hostname
 					
cat /etc/sysconfig/network     				                    cat /etc/hostname
					   

3. Interface name or lan card or NIC name                                3. Interface name or lan card or NIC name
      (default)                                                                 (default)
      

lo ==>loopback ==>127.0.0.1                                                lo ==>loopback ==>127.0.0.1

eth0   eth1  eth2                                                             ens33   or   ens160
						   



Types of ip changing methods                                             Types of ip changing methods 
=============================                                           =============================


1. command line	==>  setup						        1. command line ==>  nmcli or  nmtui

2. file method 									2. file method 
  
                  cat /etc/sysconfig/network-scripts/ifcfg-eth0   or ifcfg-ens33  or  ifcfg-ens160 




nmcli   ==>  network manager commandline interface 
nmtui   ==>  network manager text user interface






				con-name  ==> choice
					      ens33  or xyz
					
				/etc/sysconfig/network-scripts/ifcfg-ens33   or ifcfg-xyz


nmcli





				ifname  ==>  ens33





nmcli connection show
nmcli connection delete ens33     or      rm  /etc/sysconfig/network-scripts/ifcfg-ens33
nmcli connection add






1.commandline Method   (Deleting network file and adding new file)
=====================================================================

Machine-1
(commandline method)


# hostname
# hostnamectl
# hostnamectl    set-hostname   station10.example.com     (by commandline )
		OR
# vim  /etc/hosts     (by file)

192.168.0.10      station10.example.com
192.168.0.20      station20.example.com

# cat /etc/hostname
# exit
# hostname


=================================================
1.find lancard name
2.check filename
3.delete   ==>  add      / modify
==================================================

#ifconfig
#cat  /etc/sysconfig/network-scripts/ifcfg-ens33

TYPE=ETHERNET
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=dhcp
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=stable-privacy
NAME=ens33
UUID=
DEVICE=ens33
ONBOOT=no



#nmcli connection show
ens33             sabkashkjefkefhjkefhwejkehhfw           ethernet               ---       (lancard up  nahi hai)
(filename)								   (device name)



Deleting network file
======================
#nmcli connection delete ens33
#nmcli connection show



Adding new network file
=======================
#nmcli connection add   con-name  ens33(choice)   ifname  enss33(no choice)    type  ethernet   autoconnect  yes             ip4  192.168.0.10/24

#nmcli connection show
ens33             sabkashkjefkefhjkefhwejkehhfw           ethernet               ens33       (lancard up hai)
(filename)								   (device name)


#cat  /etc/sysconfig/network-scripts/ifcfg-ens33

TYPE=ETHERNET
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=none
IPADDR=192.168.0.10
PREFIX=24
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=stable-privacy
NAME=ens33
UUID=
DEVICE=ens33
ONBOOT=yes

Machine-2
(commandline method)
==============================


# hostname
# hostnamectl
# hostnamectl    set-hostname   station20.example.com    (by commandline)
			OR
# vim  /etc/hosts     (by file)

192.168.0.10      station10.example.com
192.168.0.20      station20.example.com


# cat /etc/hostname
# bash
# hostname

#ifconfig

#nmcli connection show

ens160            sabkashkjefkefhjkefhwejkehhfw           ethernet              160       (lancard up hai)
(filename)								   (device name)



Deleting network file
======================
#nmcli connection delete ens160
#nmcli connection show


Adding new network file
=======================
#nmcli connection add   con-name  xyz(choice)   ifname  enss160(no choice)    type  ethernet   autoconnect  yes             ip4  192.168.0.20/24

#nmcli connection show
xyz           sabkashkjefkefhjkefhwejkehhfw           ethernet               ens160      (lancard up hai)
(filename)								   (device name)



#cat  /etc/sysconfig/network-scripts/ifcfg-xyz

TYPE=ETHERNET
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=none
IPADDR=192.168.0.20
PREFIX=24
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=stable-privacy
NAME=xyz
UUID=
DEVICE=ens160
ONBOOT=yes





2.FILE Method
==========================

Machine-1
(File method)
=====================

#ifconfig
#vim  /etc/sysconfig/network-scripts/ifcfg-ens33

TYPE=ETHERNET
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=none
IPADDR=192.168.0.100
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=stable-privacy
NAME=ens33
UUID=
DEVICE=ens33
ONBOOT=no

#if down ens33
#if up ens33

Machine-2
(File method)
=============================

#ifconfig
#vim  /etc/sysconfig/network-scripts/ifcfg-ens160

TYPE=ETHERNET
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=none
IPADDR=192.168.0.200
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=stable-privacy
NAME=160
UUID=
DEVICE=160
ONBOOT=no

#if down ens160
#if up ens160



1.commandline Method   (Modifying )
==========================

Machine-1
(commandline method)

#nmcli connection show

#nmcli connection show
ens33             sabkashkjefkefhjkefhwejkehhfw           ethernet               ens33       (lancard up hai)
(filename)								   (device name)

#nmcli connection modify ens33 ipv4.addresses  192.168.0.50/24


#nmcli connection down ens33
#nmcli connection up ens33
#nmcli connection show

#nmcli connection show
ens33             sabkashkjefkefhjkefhwejkehhfw           ethernet               ens33       (lancard up hai)
(filename)								   (device name)

#ifconfig

***************************************************************************************************************************						
DHCP IP cofiguration

How to assign ip using DHCP Server
======================================
1.Command based
2.File based



1.commandline Method   (Deleting network file and adding new file)
===================================================================

Machine-1
(commandline method)


#nmcli connection show
ens33             sabkashkjefkefhjkefhwejkehhfw           ethernet               ens33       (lancard up hai)
(filename)								   (device name)


#nmcli connection delete ens33

#nmcli connection add   con-name  ens33(choice)   ifname  enss33(no choice)    type  ethernet   autoconnect  yes             

#nmcli connection show
ens33             sabkashkjefkefhjkefhwejkehhfw           ethernet               ens33       (lancard up hai)
(filename)

#ifconfig


#cat  /etc/sysconfig/network-scripts/ifcfg-ens33

TYPE=ETHERNET
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=dhcp
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=stable-privacy
NAME=ens33
UUID=
DEVICE=ens33
ONBOOT=yes

2.File based
========================


#vim  /etc/sysconfig/network-scripts/ifcfg-ens33

TYPE=ETHERNET
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=dhcp   (change)
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=stable-privacy
NAME=ens33
UUID=
DEVICE=ens33
ONBOOT=yes

#nmcli ifdown ens33
#nmcli ifup ens33

#nmcli connection show
ens33             sabkashkjefkefhjkefhwejkehhfw           ethernet               ens33       (lancard up hai)
(filename)								   (device name)

#ifconfig







***************************************************************************************************************************



How to create multiple profile of any single interface
==========================================================



				file (static ip)

lancard    


				file (dhcp ip)


1.Commandline method
======================

#ifconfig
#nmcli connection add   con-name  internet(choice)   ifname  enss160(no choice)    type  ethernet   autoconnect  yes 

#nmcli connection show


xyz           sabkashkjefkefhjkefhwejkehhfw           ethernet               ens160      (lancard up hai)
(filename)								   (device name)

internet           sabkashkjefkefhjkefhwejkehhfw           ethernet           -----      (lancard up hai)
(filename)								   (device name)


#nmcli connection show --active
xyz           sabkashkjefkefhjkefhwejkehhfw           ethernet               ens160      (lancard up hai)
(filename)								   (device name)

#nmcli connection up internet

#nmcli connection show

internet           sabkashkjefkefhjkefhwejkehhfw           ethernet          ens160      (lancard up hai)
(filename)								   (device name)
xyz           sabkashkjefkefhjkefhwejkehhfw           ethernet               -----      (lancard up  nahi hai)
(filename)								   (device name)

#ifconfig
#ping google.com

2.file method
==============





How to ping HOST machine to Virtuals MACHINE

Machine-1
==================

vm network adaptor  =>  setting => custom => VMnet8 (NAT)   => OK =>  vm network adaptor  => CONNECT

Machine-2
==================

vm network adaptor  =>  setting => custom => VMnet8 (NAT)   => OK =>  vm network adaptor  => CONNECT



Host machine
=============

Right click near wifi  => network & internet settings  =>  Advance Network setting  => VMware Network Adaptor VMnet8  =>more adaptor options =>Internet protocol version 4 (TCP/IPv4)  => properties =>  192.168.0.50  => ok => close => disable => enable

#ping 192.168.0.10





To check Gateway  
# ip route
#route -n
#netstat -n  -r

To check dns

#cat /etc/resolv.conf


to set ip subnet gateway dns hostname all at a time
================================================================================

1.Commandline
================


#nmcli connection show
#nmcli connection delete ens33

#nmcli connection add   con-name  ens33(choice)   ifname  enss33(no choice)    type  ethernet   autoconnect  yes             ip4  192.168.225.170/24   gw4  192.168.225.1  ipv4.dns   192.168.225.1 

#nmcli connection show
#ifconfig
#ping google.com

adding 1 more dns

#nmcli connection modify ens33 +ipv4.dns   8.8.8.8

2.File method
============

#vim /etc/sysconfig/network-scripts/ifcfg-eth0   or ifcfg-ens33  or  ifcfg-ens160 

TYPE=ETHERNET
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=none
IPADDR=192.168.225.170
NETMASK=255.255.255.0
GATEWAY=192.168.225.1
DNS1=192.168.225.1
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=stable-privacy
NAME=ens33
UUID=
DEVICE=ens33
ONBOOT=yes


#vim /etc/resolv.conf

#if down ens33
#if up ens33
#ifconfig
#ping google.com

***************************************************************************************************************************

IPv4 Configuration  ( BY Vishesh Malik )
===================       

RHEL-6   setup
RHEL-7   nmcli


Method -1 ( nmcli command )
============================

nmcli connection show
nmcli connection delete ens33
nmcli connection show

nmcli connection add con-name vishu ifname ens033 type ethernet autoconnect yes ip4 '192.168.1.100/24'
nmcli connection show

ifconfig

disable lan card    ifdown ens033
enable lan card    ifup ens033

nmcli connection modify  vishu ipv4.addresses 192.168.1.200/24
ifconfig
ifdown ens033
ifup ens033
ifconfig

Method -2 ( ip configuration file )
=======================================

nmcli connection show
vim /etc/sysconfig/network-scripts/ifcfg-ens033

BOOTPROTO=static
ONBOOT=yes
IPADDR=192.168.1.300
NETMASK=255.255.255.0

:se nu

ifconfig
ifdown ens033
ifup ens033
ifconfig




****************************************************************************************************************************




Ports :-
==========

firewall-cmd --add-port={6443,10250,10259,10257,2379-2380}/tcp
firewall-cmd --permanent --add-port={6443,10250,10259,10257,2379-2380}/tcp
firewall-cmd --complete-reload
firewall-cmd --list-all

Port Forwarding :-
====================

firewall-cmd --add-forward-port=port=22:proto=tcp:toport=2222
firewall-cmd --permanent --add-forward-port=port=22:proto=tcp:toport=2222
systemctl restart firewalld.service




***************************************************************************************************************************

Softwares (Packages)
=======================
In windows  .exe
In Linux    .rpm


Linux Package Manager
----------------------------


1. Redhat Package Manager (RPM)      - cannot install automatic dependencies of an package
2. Yellowdog Updater Modifier (YUM)  - can install automatic dependencies of an package



(Using RPM)
-----------

Package query                         rpm  -qa           tar 
					   (query all)  (packagename)


rpm -qa tar					  
tar-1.26-29.el7.x86_64           
                  
tar                -1.26-29           .el7          .x86_64
Package name    Package version       Rhel7       architecture
       

To get list of all installed packages           rpm -qa
Package query / To install  packages            rpm -qa zip*
Total installed packages              		rpm -qa | wc -l
Remove package                        		rpm -e zip 
Remove package forcefully             		rpm -e zip --nodeps
Install package                       		rpm -ivh zip press tab 



Configuring Yum Server
=======================



Method-1 ( By automatic Mounting point ) 
=======================================

lsblk
mkdir /redhatdvd
ls /
cd /run/media/root/RHEL-9-0-0-BaseOS-X86_64                        /run/media/root/Devicename
ls
cp -rf *  /redhatdvd


vim /etc/yum.repos.d/localrepo.repo
[path-1]
name=This is my local repo for baseos directory.
baseurl=file:///redhatdvd/BaseOS
enabled=1
gpgcheck=0
[path-2]
name=This is my local repo for baseos directory.
baseurl=file:///redhatdvd/AppStream
enabled=1
gpgcheck=0


Method -2  ( Directly from the ISO dvd )
===================================================
Requirement - Redhat iso must always be connected

lsblk
ls /run/media/root/RHEL-9-0-0-BaseOS-X86_64
ls /run/media/root/RHEL-9-0-0-BaseOS-X86_64/AppStream
ls /run/media/root/RHEL-9-0-0-BaseOS-X86_64/BaseOs

vim /etc/yum.repos.d/localrepo.repo
[path-1]
name=This is my local repo for baseos directory.
baseurl=file:///run/media/root/RHEL-9-0-0-BaseOS-X86_64/AppStream
enabled=1
gpgcheck=0
[path-2]
name=This is my local repo for baseos directory.
baseurl=file:///run/media/root/RHEL-9-0-0-BaseOS-X86_64/BaseOs
enabled=1
gpgcheck=0


Method-3 ( By Using Default Mounting point -  /mnt)
=======================================================

lsblk
mount /dev/sr0  /mnt
lsblk
mkdir /localrepo
ls /
cd /mnt
ls
cp -rf *  /localrepo

vim /etc/yum.repos.d/localrepo.repo
[path-1]
name=This is my local repo for baseos directory.
baseurl=file:///redhatdvd/BaseOS
enabled=1
gpgcheck=0
[path-2]
name=This is my local repo for baseos directory.
baseurl=file:///redhatdvd/AppStream
enabled=1
gpgcheck=0


Method-3     ( By Using Manual Mounting point -  /redhat)
=============================================================


mkdir /redhatdvd
ls /
lsblk

mount /dev/sr0  /redhatdvd
lsblk
lsblk-f
vim /etc/fstab                       /dev/sr0             /redhatdvd       iso9660     defaults   0   0  
systemctl daemon reload
df -TH
ls /redhatdvd

vim /etc/yum.repos.d/localrepo.repo
[path-1]
name=This is my local repo for baseos directory.
baseurl=file:///redhatdvd/AppStream
enabled=1
gpgcheck=0
[path-2]
name=This is my local repo for baseos directory.
baseurl=file:///redhatdvd/BaseOS 
enabled=1
gpgcheck=0


Method-4     ( By Using Manual Mounting point -  /)           FALTU
===========================================================

lsblk
mkdir /redhatdvd
mkdir /localrepo
ls /
lsblk
mount /dev/sr0  /redhatdvd
lsblk
cd /redhatdvd
ls
cp -rf *  /localrepo

vim /etc/yum.repos.d/localrepo.repo
[path-1]
name=This is my local repo for baseos directory.
baseurl=file:///redhatdvd/BaseOS
enabled=1
gpgcheck=0                                                               (0 - NO VERIFY    1 - VERIFY)
[path-2]
name=This is my local repo for baseos directory.
baseurl=file:///redhatdvd/AppStream
enabled=1
gpgcheck=0


Yum commands
=================

yum clean all
yum repolist
yum repolist all
yum list
yum list | grep httpd
which yum
yum info httpd
yum search httpd
yum install httpd
yum remove httpd



Downloading something from ISO ( We need to mount iso on some directory to acess the files inside iso )
==============================================================================================================

wget https://repo.extreme-ix.org/centos/7.9.2009/isos/x86_64/CentOs-7-x86_64-DVD-2009.iso

ls
mkdir /data
mount CentOs-7-x86_64-DVD-2009.iso  /data
ls

mkdir /newdata
cd /data
cp -rf *   /newdata
cd 
ls /data
ls /newdata
umount  /data

rm -rf CentOs-7-x86_64-DVD-2009.iso





*************************************************************************************************************************

Service Management
===================

         
    RHEL -6 (daemon )                                                RHEL-7  ( units )

1. Parent process = init					1. Parent process = systemd
     process id =1							process id =1

2.Service management tool    					2. Service management tool 					
Temporary command =  service     				   Temporary command = systemctl
Permanent command = chkconfig					   Permanent command = systemctl

3.
service sshd start						   systemctl start sshd
service sshd restart						   systemctl restart sshd
service sshd stop						   systemctl stop sshd
service sshd reload						   systemctl reload sshd
service sshd status						   systemctl status sshd

4. 
chkconfig sshd on						   systemctl enable sshd
chkconfig sshd off						   systemctl disable sshd

5.Quie boot process						5. Parallel boot process
6.Service does not auto start after reboot			6. Service  auto start after reboot



Types of unit
-----------------
1.Service  ==> ssh,ntp,dns etc
2.path     ==> printer service
3.sockets  ==>scsi & iscsi  or  network device concept

systemctl       actions       unit.name

systemctl       status        sshd
                 or
systemctl       status        sshd.services



RHEL-6
service      daemon   action  ->  Temporary action
chkconfig    daemon   action  ->  Permanent action

RHEL-7
systemctl    action   daemon ->   Temporary action
chkconfig    action   daemon ->   Permanent action

systemctl    ( start/stop/status/restart/reload )      sshd
systemctl    ( enable/disable )                        sshd

[root@localhost~]#pid of sshd
[root@localhost~]#systemctl start sshd
[root@localhost~]#systemctl is-active sshd
[root@localhost~]#systemctl enable sshd
[root@localhost~]#systemctl is-enabled sshd
[root@localhost~]#systemctl status sshd

[root@localhost~]#systemctl stop sshd
[root@localhost~]#systemctl is-active sshd
[root@localhost~]#systemctl disable sshd
[root@localhost~]#systemctl is-enabled sshd
[root@localhost~]#systemctl status sshd



When a service is reload its pid does not change and when its restarted its pid gets changed
[root@localhost~]#pid of sshd
53353
[root@localhost~]#systemctl reload sshd
[root@localhost~]#pid of sshd
53353
[root@localhost~]#systemctl restart sshd
[root@localhost~]#pid of sshd
53638
***************************************************************************************************************************

Server Configurations
=========================================================================================





1. NFS Server Configuration
===================================

Server Machine
================

ifconfig
ping xxx.xxx.xxx.xxx  (client machine ip )


mkdir /nfsserver
chmod 777 /nfsserver

vim /etc/exports
/nfsserver *(rw,async) 
or               
/nfsserver *(rw,sync)
or
/nfsserver 192.168.1.0 (rw,async)
or
/nfsserver 192.168.1.200 (rw,async)

ls /nfsserver
systemctl start nfs-server
systemctl enable nfs-server
firewall-cmd --permanent --add-service=nfs
firewall-cmd --permanent --add-service=rpc-bind
firewall-cmd --permanent --add-service=mountd
firewall-cmd --reload
exportfs -v
exportfs -r
showmount -e


ls /nfsserver



Client
===============

ifconfig
ping xxx.xxx.xxx.xxx  (nfs server machine ip )

mkdir /garden         ( This will act as mounting point for the /nfsserver directory which is placed on server machine )
showmount -e xxx.xxx.xxx.xxx ( nfs server machine ip )
mount xxx.xxx.xxx.xxx:/nfsserver /garden
( nfs server machine ip )

vim /etc/fstab
xxx.xxx.xxx.xxx:/nfsserver        /garden      nfs    defaults   0 0              
( nfs server machine ip )

mount -a

df -TH
cd /garden
ls
mkdir vishesh\ malik{1..20}
ls



****************************************************************************************************************************



2. FTP  Configuration
==========================================


FTP Server
==============

ifconfig
yum repolist
yum install vsftpd*  -y
systemctl start vsftpd
systemctl enable vsftpd
firewall-cmd --permanent --add-service=ftp
firewall-cmd --reload

cd  /var/ftp/
ls
cd pub
mkdir download
cd download
touch vishesh{1..20}
ls
cd /
chmod 777 /var/ftp/pub/
getsebool -a | grep ftp
setsebool -P ftp_home_dir on 
getsebool -a | grep ftp
systemctl restart vsftpd



Client
=========================

touch upfile{1..5}
ifconfig
yum repolist
yum install ftp -y
ping xxx.xxx.xxx.xxx   (ftp server ip)

login as anonymous
======================

ftp xxx.xxx.xxx.xxx   (ftp server ip)
anonymous
ftp> help
ftp> ls
ftp> cd pub
ftp> ls
ftp> cd download
ftp> ls
ftp> get vishesh1
ftp> mget vishesh2  vishesh3   vishesh4       y

ftp> prompt
ftp> mget vishesh*     (all at a time )


ftp> lcd /tmp            ( downloading files at other location )
ftp> mget vishesh*

ftp> exit

ls /tmp
ls

Login as user
=================

ftp xxx.xxx.xxx.xxx   (ftp server ip)
sansri
sansri

ftp> help
ftp> prompt
ftp> mput upfile*




****************************************************************************************************************************


3. Apache Server Configuration
=======================================



Single server configuration
===========================

ifconfig
yum repolist
hostname  (server1.example.com)

vim /etc/hosts
xxx.xxx.xxx.xxx   server1.example.com

yum install http* -y
systemctl start httpd
systemctl enable httpd
firewall-cmd --permanent --add-services=http
firewall-cmd --reload

cd /var/www/html/
ls
vim index.html
codes

systemctl restart httpd

firefox
http://server1.example.com




virtual hosting    /    Multiple server hosting
===================================================

cd /var/www
mkdir google yahoo
cd google/
echo "This is my local google web page" > google.html
ls
cd ..
cd yahoo/
echo "This is my local yahoo web page" > yahoo.html
ls

vim /etc/httpd/conf/httpd.conf

<Virtual Host  xxx.xxx.xxx.xxx:80>

ServerAdmin  root@server1.example.com
DirectoryRoot  /var/www/google
DirectoryIndex  google.html
ServerName google.example.com
ServerAlias   google.com
CustomLog  "logs/google_access_log" combined
ErrorLog  "logs/google_error_log"

</VirtualHost>

<Virtual Host  xxx.xxx.xxx.xxx:80>

ServerAdmin  root@server1.example.com
DirectoryRoot  /var/www/yahoo
DirectoryIndex  yahoo.html
ServerName yahoo.example.com
ServerAlias   yahoo.com
CustomLog  "logs/yahoo_access_log" combined
ErrorLog  "logs/yahoo_error_log"

</VirtualHost>

systemctl restart httpd

vim /etc/hosts
xxx.xxx.xxx.xxx   server1.example.com
xxx.xxx.xxx.xxx   google.example.com
xxx.xxx.xxx.xxx   yahoo.example.com

systemctl restart httpd


firefox
http://google.example.com
http://yahoo.example.com


***************************************************************************************************************************


4. Port Forwarding
==================

vim /etc/httpd/conf/httpd.conf

<Virtual Host  xxx.xxx.xxx.xxx:82>
ServerAdmin  root@server1.example.com
DirectoryRoot  /var/www/google
DirectoryIndex  google.html
ServerName google.example.com
ServerAlias   google.com
CustomLog  "logs/google_access_log" combined
ErrorLog  "logs/google_error_log"

</VirtualHost>

<Virtual Host  xxx.xxx.xxx.xxx:82>
ServerAdmin  root@server1.example.com
DirectoryRoot  /var/www/yahoo
DirectoryIndex  yahoo.html
ServerName yahoo.example.com
ServerAlias   yahoo.com
CustomLog  "logs/yahoo_access_log" combined
ErrorLog  "logs/yahoo_error_log"

</VirtualHost>

line 42 -  Listen 82  (add this line)
:se nu


systemctl restart httpd

semanage  port  -l  |  grep http                               ( selinux)
semanage  port  -a  -t  http_port_t    -p   tcp  82
semanage  port  -l  |  grep http
systemctl restart httpd

firefox
http://google.example.com:82
http://yahoo.example.com:82



